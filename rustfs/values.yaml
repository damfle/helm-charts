# Default values for rustfs.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.


# Override naming to use "rustfs" instead of "rustfs"
nameOverride: "rustfs"
fullname: "rustfs"

# Override image settings for RustFs (using hacdias/rustfs)
image:
  repository: rustfs/rustfs
  pullPolicy: IfNotPresent
  tag: "1.0.0-alpha.66" # Must be explicit for dependency charts

serviceAccount:
  create: true
  automount: true

# Single replica for RustFs
replicaCount: 1

# Node scheduling
nodeSelector: {}
tolerations: []
affinity: {}

# RustFs specific environment variables
env:
  - name: RUSTFS_ADDRESS
    value: ":9090"
  - name: RUSTFS_VOLUMES
    value: "/data"
  - name: RUSTFS_CONSOLE_ENABLE
    value: "true"

# Configure persistence for RustFs data
persistence:
  enabled: true
  accessModes:
    - ReadWriteOnce
  size: 16Gi
  mountPath: /data

# Resource limits and requests
resources:
  limits:
    cpu: 200m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 128Mi

# Health checks
livenessProbe:
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 5
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3

# Security context
securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: false

podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

# Ingress configuration (recommended for RustFs external access)
ingress:
  enabled: false
  hosts:
    - host: rustfs.local
  tls: []

# This will set the replicaset count more information can be found here: https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/
replicaCount: 1
